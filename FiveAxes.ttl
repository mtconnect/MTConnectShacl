@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix data: <http://example.org/data/> .
@prefix core: <https://spec.indusrialontologies.org/ontology/core/Core/> .
@prefix val: <http://example.org/shacl/> .
@prefix mt: <https://purl.mtconnect.org/ontology/> .

val:LinearShape a sh:NodeShape ;
  sh:targetClass mt:Linear ;
  sh:property [
    sh:path mt:hasName ;
    sh:pattern "^[X-Z][0-9]*$"
    sh:minCount 1 ;
  ] .

val:RotaryShape a sh:NodeShape ;
  sh:targetClass mt:Rotary ;
  sh:property [
    sh:path mt:hasName ;
    sh:pattern "^[A-C][0-9]*$"
    sh:minCount 1 ;
  ] .

val:FiveAxes a sh:NodeShape ;
  sh:targetClass mt:Device ;
  sh:property [
    sh:path mt:hasComponent ;
    sh:qualifiedValueShape [
      sh:class mt:Axes ;
      sh:property [
        sh:path mt:hasComponent ;
        sh:message "The device must have at least three linear axes." ;
        sh:qualifiedValueShape [
          sh:class mt:Linear ;
        ] ;
        sh:qualifiedMinCount 3 ;
      ] ;
      sh:property [
        sh:path mt:hasComponent ;
        sh:message "The device must have at least three rotary axes." ;
        sh:qualifiedValueShape [
          sh:class mt:Rotary ;
        ] ;
        sh:qualifiedMinCount 3 ;
      ] 
    ] ;
    sh:qualifiedMinCount 1 ;
    sh:qualifiedMaxCount 1 ;
  ] .

